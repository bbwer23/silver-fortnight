<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RightsPath | Safe Legal Help</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #4A90E2; --text: #2D3436; --bg: #FFFFFF; --soft-gray: #F8F9FA; --border: #E9ECEF; }
        body { margin: 0; font-family: 'Outfit', sans-serif; background: var(--bg); color: var(--text); }
        nav { display: flex; justify-content: space-between; padding: 20px 80px; border-bottom: 1px solid var(--border); background: white; }
        .logo { font-weight: 700; font-size: 22px; color: var(--accent); }
        .nav-links button { background: none; border: none; margin-left: 30px; font-weight: 600; color: #636e72; cursor: pointer; font-family: inherit; }
        main { max-width: 800px; margin: 60px auto; padding: 0 20px; }
        .page { display: none; }
        .page.active { display: block; }
        .card { background: var(--soft-gray); border-radius: 24px; padding: 40px; border: 1px solid var(--border); }
        textarea { width: 100%; border: 2px solid #fff; border-radius: 16px; padding: 20px; font-size: 16px; margin-bottom: 20px; box-sizing: border-box; font-family: inherit; }
        .btn-action { background: var(--accent); color: white; border: none; padding: 18px 40px; border-radius: 16px; font-weight: 700; cursor: pointer; width: 100%; }
        #aiResult { margin-top: 30px; padding: 25px; background: white; border-radius: 16px; display: none; border-left: 4px solid var(--accent); }
    </style>
</head>
<body>

<nav>
    <div class="logo">RIGHTSPATH.</div>
    <div class="nav-links">
        <button onclick="showPage('home')">Home</button>
        <button onclick="showPage('ai')">Analysis</button>
        <button onclick="showPage('contact')">Contact</button>
    </div>
</nav>

<main>
    <div id="home" class="page active">
        <h1>Welcome home.</h1>
        <p>Your safety is our priority. Use the Analysis tool to understand your rights.</p>
        <button class="btn-action" onclick="showPage('ai')">Go to AI Analysis</button>
    </div>

    <div id="ai" class="page">
        <h1>Incident Analysis</h1>
        <div class="card">
            <textarea id="aiInput" placeholder="Describe the situation..."></textarea>
            <button class="btn-action" onclick="runAnalysis()">Run Scan</button>
            <div id="aiResult">
                <div id="aiOutputText"></div>
            </div>
        </div>
    </div>

    <div id="contact" class="page">
        <h1>Lawyer Review</h1>
        <div class="card">
            <p>This form will be reviewed by a human professional.</p>
            <input type="text" placeholder="Your Name" style="width:100%; padding:15px; margin-bottom:10px; border-radius:10px; border:1px solid #ddd;">
            <button class="btn-action" onclick="alert('Submitted.')">Submit</button>
        </div>
    </div>
</main>

<script>
    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    async function runAnalysis() {
        const KEY = "AIzaSyCMPcdXt9WHBZrUOB_KG-Ca0BrGqumEF-A";
        const input = document.getElementById('aiInput').value;
        const resDiv = document.getElementById('aiResult');
        const resText = document.getElementById('aiOutputText');

        resDiv.style.display = "block";
        resText.innerText = "Processing...";

        try {
            // Using the 'latest' model tag which is more stable for 2026
      const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-3-flash-preview:generateContent?key=${KEY}`,
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    contents: [{ parts: [{ text: "Explain the US legal rights for this situation and give a script of what to say: " + input }] }]
                })
            });

            const data = await response.json();
            
            if (data.error) {
                resText.innerHTML = `<span style="color:red">Google Error: ${data.error.message}</span>`;
            } else {
                resText.innerText = data.candidates[0].content.parts[0].text;
            }

        } catch (e) {
            resText.innerText = "System Error: " + e.message;
        }
    }
</script>
</body>
</html>
